tweak ai logic
clean up code
switch to firebase RTDB (move thread to separate object, use firestore)